(ns cve-lookup.config
  (:require [aero.core :as aero]
            [clojure.java.io :as io]
            [mount.core :as mount]))

(def config-file (atom "default-config.edn"))

(defn read-config []
  (aero/read-config (io/resource @config-file)))

(mount/defstate root :start (read-config))

(defn database []
  (get-in root [:database]))

(defn migration []
  (get-in root [:migration]))

(defn server []
  (get-in root [:server]))

(defn site-nvd-nist-gov []
  (get-in root [:nvd-nist-gov]))

(defn downloading-dir []
  (get-in root [:downloading-dir]))

(defn schedule-days []
  (get-in root [:schedule-days]))

(defn mask-all-years []
  (get-in root [:mask-all-years]))

(defn mask-recent-files []
  (get-in root [:mask-recent-files]))

(defn modified-file-name []
  (get-in root [:modified-file-name]))